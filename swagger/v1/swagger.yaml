---
openapi: 3.0.1
info:
  title: Destinations API V1
  version: v1
paths:
  "/api/v1/trips":
    post:
      summary: Creates a trip
      tags:
      - Trips
      parameters: []
      responses:
        '201':
          description: trip created
          content:
            application/json:
              schema:
                type: object
                properties:
                  trip:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: Forbidden Island
                      image_url:
                        type: string
                        example: https://example.com/image.jpg
                      short_description:
                        type: string
                        example: Secret place
                      long_description:
                        type: string
                        nullable: true
                        example: Very secret place
                      rating:
                        type: integer
                        example: 1
                    required:
                    - id
                    - name
                    - image_url
                    - short_description
                    - rating
                required:
                - trip
        '422':
          description: invalid parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: validation_error
                      message:
                        type: string
                        example: Name can't be blank
                    required:
                    - code
                    - message
                required:
                - error
        '400':
          description: unpermitted parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: unpermitted_parameters
                      message:
                        type: string
                        example: 'Found unpermitted parameter: hack_param'
                    required:
                    - code
                    - message
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                trip:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Forbidden Island
                    image_url:
                      type: string
                      example: https://example.com/image.jpg
                    short_description:
                      type: string
                      example: Secret place
                    long_description:
                      type: string
                      nullable: true
                      example: Very secret place
                    rating:
                      type: integer
                      example: 1
                  required:
                  - name
                  - image_url
                  - short_description
                  - rating
              required:
              - trip
    get:
      summary: Lists trips
      tags:
      - Trips
      parameters:
      - name: search
        in: query
        required: false
        description: Search by name
        schema:
          type: string
      - name: min_rating
        in: query
        required: false
        description: Minimum rating filter
        schema:
          type: integer
      - name: sort
        in: query
        required: false
        description: Sort column (name, rating)
        schema:
          type: string
      - name: direction
        in: query
        required: false
        description: Sort direction (asc, desc)
        schema:
          type: string
      - name: page
        in: query
        required: false
        description: Page number
        schema:
          type: integer
      - name: per_page
        in: query
        required: false
        description: Records per page
        schema:
          type: integer
      - name: foo
        in: query
        required: false
        description: Unpermitted query param example
        schema:
          type: string
      responses:
        '200':
          description: trips retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  trips:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 5
                        name:
                          type: string
                          example: Mount Rushmore
                        image_url:
                          type: string
                          example: https://images.unsplash.com/photo-1586974772928-9e4d0efcc9ab
                        short_description:
                          type: string
                          example: Famous presidential monument carved into granite.
                        rating:
                          type: integer
                          example: 4
                      required:
                      - id
                      - name
                      - image_url
                      - short_description
                      - rating
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 10
                      total_pages:
                        type: integer
                        example: 1
                      total_records:
                        type: integer
                        example: 3
                    required:
                    - current_page
                    - per_page
                    - total_pages
                    - total_records
                required:
                - trips
                - meta
        '400':
          description: bad request with unpermitted params
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: unpermitted_parameters
                      message:
                        type: string
                        example: 'Found unpermitted parameter: foo'
                    required:
                    - code
                    - message
                required:
                - error
  "/api/v1/trips/{id}":
    parameters:
    - name: id
      in: path
      description: Trip ID
      required: true
      schema:
        type: integer
    - name: foo
      in: query
      required: false
      description: Unpermitted query param example
      schema:
        type: string
    get:
      summary: Retrieves a trip
      tags:
      - Trips
      responses:
        '200':
          description: trip found
          content:
            application/json:
              schema:
                type: object
                properties:
                  trip:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: Grand Canyon National Park
                      image_url:
                        type: string
                        example: https://images.unsplash.com/photo-1501785888041-af3ef285b470
                      short_description:
                        type: string
                        example: Vast red rock canyon carved by the Colorado River.
                      long_description:
                        type: string
                        nullable: true
                        example: Stretching 277 miles long and over a mile deep, the
                          Grand Canyon reveals nearly two billion years of Earth's
                          history through its colorful layers of rock. Visitors can
                          hike, raft, or simply take in the breathtaking views from
                          the rim.
                      rating:
                        type: integer
                        example: 5
                    required:
                    - id
                    - name
                    - image_url
                    - short_description
                    - rating
                required:
                - trip
        '404':
          description: trip not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: not_found
                      message:
                        type: string
                        example: The record you were looking for could not be found.
                    required:
                    - code
                    - message
                required:
                - error
        '400':
          description: bad request with unpermitted params
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: unpermitted_parameters
                      message:
                        type: string
                        example: 'Found unpermitted parameter: foo'
                    required:
                    - code
                    - message
                required:
                - error
servers:
- url: http://localhost:3000
  description: Local server
